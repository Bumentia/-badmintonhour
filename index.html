<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ระบบบันทึกชั่วโมงการสอนแบดมินตัน</title>

  <!-- Google Fonts: Mitr -->
  <link href="https://fonts.googleapis.com/css2?family=Mitr&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      font-family: 'Mitr', sans-serif;
      background: #e8f5e9; /* สีเขียวอ่อนพื้นหลัง */
      min-height: 100vh;
      margin: 0;
      padding: 1.5rem;
    }
    .header {
      background-color: #2ecc71; /* สีเขียวสด */
      color: white;
      padding: 1.25rem 2rem;
      border-radius: 1rem 1rem 0 0;
      display: flex;
      align-items: center;
      gap: 1rem;
      box-shadow: 0 4px 8px rgb(46 204 113 / 0.5);
      user-select: none;
    }
    .header img {
      width: 48px;
      height: 48px;
      filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));
    }
    .container {
      background: white;
      border-radius: 0 0 1rem 1rem;
      padding: 1.5rem 2rem 2rem;
      box-shadow: 0 4px 10px rgb(46 204 113 / 0.3);
      max-width: 720px;
      margin: 0 auto;
    }
    table thead {
      background-color: #a5d6a7; /* สีเขียวอ่อน */
    }
    button {
      background-color: #3498db; /* ฟ้า */
      transition: background-color 0.3s ease;
      outline: none;
    }
    button:hover {
      background-color: #2980b9;
    }
    /* ปุ่มลบสีแดง */
    .btn-delete {
      color: #e74c3c;
      font-weight: 600;
      cursor: pointer;
      transition: color 0.3s ease;
      outline: none;
      border: none;
      background: none;
      padding: 0;
    }
    .btn-delete:hover {
      color: #c0392b;
    }
    /* ป้องกันปุ่มขยับเวลาคลิก */
    button:focus,
    button:active {
      outline: none;
      transform: none;
      transition: none;
    }
  </style>
</head>
<body>

  <div class="max-w-3xl mx-auto shadow-lg rounded-lg overflow-hidden">
    <header class="header">
      <!-- โลโก้แบดมินตันใหม่ -->
      <img src="https://cdn-icons-png.flaticon.com/512/4473/4473850.png" alt="แบดมินตัน" />
      <h1 class="text-3xl font-bold">ระบบบันทึกชั่วโมงการสอนแบดมินตัน</h1>
    </header>

    <main class="container">
      <!-- แบบฟอร์มกรอกข้อมูล -->
      <form id="teachingForm" class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end mb-6">
        <div>
          <label class="block mb-1 font-medium text-sm">วันที่</label>
          <input type="date" id="date" class="w-full border rounded px-3 py-2" required />
        </div>

        <div>
          <label class="block mb-1 font-medium text-sm">จำนวนชั่วโมง</label>
          <input type="number" id="hours" step="0.5" min="0.5" class="w-full border rounded px-3 py-2" required />
        </div>

        <div>
          <label class="block mb-1 font-medium text-sm">เรต (บาท/ชม.)</label>
          <select id="rate" class="w-full border rounded px-3 py-2" required>
            <option value="250">250</option>
            <option value="300">300</option>
          </select>
        </div>

        <div class="md:col-span-3 text-right">
          <button type="submit" class="px-4 py-2 rounded text-white font-semibold hover:shadow-lg">เพิ่มรายการ</button>
        </div>
      </form>

      <!-- ตารางแสดงรายการ -->
      <div id="summaryArea" class="overflow-x-auto rounded-md border border-green-300">
        <table class="w-full table-auto border-collapse text-sm">
          <thead class="bg-green-200">
            <tr>
              <th class="border px-3 py-2 text-left">วันที่</th>
              <th class="border px-3 py-2 text-center">ชั่วโมง</th>
              <th class="border px-3 py-2 text-center">เรต</th>
              <th class="border px-3 py-2 text-right">รวมเงิน (บาท)</th>
              <th class="border px-3 py-2 text-center">ลบ</th>
            </tr>
          </thead>
          <tbody id="logTable" class="bg-white"></tbody>
          <tfoot class="bg-green-100 font-semibold">
            <tr>
              <td class="border px-3 py-2 text-left">รวม</td>
              <td id="totalHours" class="border px-3 py-2 text-center">0</td>
              <td class="border px-3 py-2 text-center">-</td>
              <td id="totalMoney" class="border px-3 py-2 text-right">0 บาท</td>
              <td class="border px-3 py-2 text-center">-</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </main>
  </div>

  <script>
    const form = document.getElementById("teachingForm");
    const logTable = document.getElementById("logTable");
    const totalHoursEl = document.getElementById("totalHours");
    const totalMoneyEl = document.getElementById("totalMoney");

    let entries = [];

    window.onload = function () {
      const saved = localStorage.getItem("teachingLogs");
      if (saved) {
        entries = JSON.parse(saved);
        renderTable();
      }
    };

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const date = document.getElementById("date").value;
      const hours = parseFloat(document.getElementById("hours").value);
      const rate = parseInt(document.getElementById("rate").value);

      const total = hours * rate;

      entries.push({ date, hours, rate, total });
      saveToLocal();
      renderTable();
      form.reset();
    });

    function renderTable() {
      logTable.innerHTML = "";
      let sumHours = 0;
      let sumTotal = 0;

      entries.forEach((entry, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td class="border px-3 py-2">${entry.date}</td>
          <td class="border px-3 py-2 text-center">${entry.hours}</td>
          <td class="border px-3 py-2 text-center">${entry.rate}</td>
          <td class="border px-3 py-2 text-right">${entry.total.toFixed(2)}</td>
          <td class="border px-3 py-2 text-center">
            <button onclick="deleteEntry(${index})" class="btn-delete" aria-label="ลบรายการ">ลบ</button>
          </td>
        `;
        logTable.appendChild(row);

        sumHours += entry.hours;
        sumTotal += entry.total;
      });

      totalHoursEl.textContent = sumHours.toFixed(1);
      totalMoneyEl.textContent = sumTotal.toLocaleString("th-TH", { minimumFractionDigits: 2 }) + " บาท";
    }

    function deleteEntry(index) {
      if (confirm("คุณแน่ใจว่าต้องการลบรายการนี้?")) {
        entries.splice(index, 1);
        saveToLocal();
        renderTable();
      }
    }

    function saveToLocal() {
      localStorage.setItem("teachingLogs", JSON.stringify(entries));
    }
  </script>

</body>
</html>
